(function(){"use strict";const w="";function c(e,t,a,u,r,o,i,b){var n=typeof e=="function"?e.options:e;t&&(n.render=t,n.staticRenderFns=a,n._compiled=!0),u&&(n.functional=!0),o&&(n._scopeId="data-v-"+o);var l;if(i?(l=function(s){s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!s&&typeof __VUE_SSR_CONTEXT__<"u"&&(s=__VUE_SSR_CONTEXT__),r&&r.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(i)},n._ssrRegister=l):r&&(l=b?function(){r.call(this,(n.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(n.functional){n._injectStyles=l;var v=n.render;n.render=function($,f){return l.call(f),v($,f)}}else{var d=n.beforeCreate;n.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:n}}const h={data(){return{label:"",dateTranslated:"…",dateDefaultLanguage:"…"}},computed:{defaultLanguage(){return console.log(this.$languages),this.$languages.find(e=>e.default===!0).code.toUpperCase()},isDefaultLanguage(){return this.$language.default},helpHtml(){const{dateTranslated:e,dateDefaultLanguage:t,dateModified:a=null,defaultLanguage:u,isOutdated:r,$t:o}=this;let i="";return e&&(e===a?i+=o("tobiaswolf.machine-translation.section.info.translation.short",{dateTranslated:e,dateModified:a})+"<br>":i+=o("tobiaswolf.machine-translation.section.info.translation",{dateTranslated:e,dateModified:a})+"<br>"),e||(i+=o("tobiaswolf.machine-translation.section.info.translationNotTranslated")+"<br>"),i+=o("tobiaswolf.machine-translation.section.info.translationDefaultLanguage",{dateDefaultLanguage:t,defaultLanguage:u})+"<br>",r&&(i+=`<strong>${o("tobiaswolf.machine-translation.section.info.outdated")}</strong><br>`),i}},created(){this.load().then(e=>{this.label=e.label,this.updateProps()})},methods:{updateProps(){this.load().then(e=>{this.dateTranslated=e.dateTranslated,this.dateModified=e.dateModified,this.dateDefaultLanguage=e.dateDefaultLanguage,this.isOutdated=e.isOutdated})},async translate(){this.$urls.api;const e=this.$store.state.content.current,t={forceOverwrite:this.overwrite};await this.$api.request(`machine-translate${e}`,{method:"post",headers:{"x-csrf":this.$system.csrf,"x-language":this.$language.code},body:JSON.stringify(t)}),this.$reload(),this.updateProps()}}};var g=function(){var t=this,a=t._self._c;return a("section",{staticClass:"k-section k-machine-translate-section"},[a("header",{staticClass:"k-section-header"},[a("h2",{staticClass:"k-label k-section-label"},[a("span",{staticClass:"k-label-text"},[t._v(t._s(t.label))])])]),t.isDefaultLanguage?a("k-info-field",{attrs:{text:t.$t("tobiaswolf.machine-translation.section.info.defaultLanguage",{defaultLanguage:t.defaultLanguage})}}):t._e(),t.isDefaultLanguage?t._e():a("k-button",{attrs:{variant:"filled",icon:"globe"},on:{click:t.translate}},[t._v(" "+t._s(t.$t("tobiaswolf.machine-translation.section.translate"))+" ")]),t.isDefaultLanguage?t._e():a("k-input",{attrs:{type:"toggle",text:t.$t("tobiaswolf.machine-translation.section.toggle.overwrite"),name:"overwrite"},model:{value:t.overwrite,callback:function(u){t.overwrite=u},expression:"overwrite"}}),t.isDefaultLanguage?t._e():a("k-text",{staticClass:"k-field-help",attrs:{html:t.helpHtml}})],1)},_=[],p=c(h,g,_,!1,null,null,null,null);const m=p.exports;window.panel.plugin("tobiaswolf/machine-translation",{sections:{"machine-translate":m}})})();
